<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Building a Simple React Dapp on the Tezos Blockchain — Part 2</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Building a Simple React Dapp on the Tezos Blockchain — Part 2</h1>
</header>
<section data-field="subtitle" class="p-summary">
NOTE: This is part 2 of a series of posts about how to connect a react webapp to the tezos blockchain. For other posts see:
</section>
<section data-field="body" class="e-content">
<section name="5c79" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="bbf1" id="bbf1" class="graf graf--h3 graf--leading graf--title">Building a Simple React Dapp on the Tezos Blockchain — Part 2</h3><figure name="ccb1" id="ccb1" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*C0oJwsfCaGymFDwbvLGKhA.jpeg" data-width="4500" data-height="4500" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*C0oJwsfCaGymFDwbvLGKhA.jpeg"></figure><p name="e0a2" id="e0a2" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">NOTE: This is part 2 of a series of posts about how to connect a react webapp to the Tezos blockchain. For other posts see:</em></strong></p><ol class="postList"><li name="f0c9" id="f0c9" class="graf graf--li graf-after--p"><a href="https://medium.com/tezos-israel/building-a-simple-react-dapp-on-the-tezos-blockchain-part-1-777ff6b0b84e" data-href="https://medium.com/tezos-israel/building-a-simple-react-dapp-on-the-tezos-blockchain-part-1-777ff6b0b84e" class="markup--anchor markup--li-anchor" target="_blank"><em class="markup--em markup--li-em">Part 1 — Bootstrapping</em></a></li><li name="d22c" id="d22c" class="graf graf--li graf-after--li"><em class="markup--em markup--li-em">Part 2 — Connect to a wallet</em></li><li name="902b" id="902b" class="graf graf--li graf-after--li"><a href="https://medium.com/tezos-israel/building-a-simple-react-dapp-on-the-tezos-blockchain-part-3-47af30a550d4" data-href="https://medium.com/tezos-israel/building-a-simple-react-dapp-on-the-tezos-blockchain-part-3-47af30a550d4" class="markup--anchor markup--li-anchor" target="_blank"><em class="markup--em markup--li-em">Part 3 — Connect and interact with a contract</em></a></li></ol><p name="218b" id="218b" class="graf graf--p graf-after--li">Complete code for this series is <a href="https://gitlab.com/tezosisrael/demo-tezos-react" data-href="https://gitlab.com/tezosisrael/demo-tezos-react" class="markup--anchor markup--p-anchor" rel="noopener nofollow noopener" target="_blank"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">here</em></strong></a><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">.</em></strong></p><p name="add9" id="add9" class="graf graf--p graf-after--p">This post follows my <a href="https://medium.com/tezos-israel/building-a-simple-react-dapp-on-the-tezos-blockchain-part-1-777ff6b0b84e" data-href="https://medium.com/tezos-israel/building-a-simple-react-dapp-on-the-tezos-blockchain-part-1-777ff6b0b84e" class="markup--anchor markup--p-anchor" target="_blank"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">last post</em></strong></a> where we bootstrapped a simple react app. In this post, we will connect our app to a wallet and show its balance.</p><h3 name="da25" id="da25" class="graf graf--h3 graf-after--p">Connect to the wallet</h3><p name="b19a" id="b19a" class="graf graf--p graf-after--h3">We will create a few react hooks for this app, so let’s create a new folder <code class="markup--code markup--p-code">hooks</code> and create a new file inside it <code class="markup--code markup--p-code">use-wallet.js</code>.</p><p name="d7a2" id="d7a2" class="graf graf--p graf-after--p">VSCode tip: right-click the src folder and choose to create a file, when asked for a name for the file write <code class="markup--code markup--p-code">hooks/use-wallet.js</code>, this will create the folder and the file.</p><p name="73f9" id="73f9" class="graf graf--p graf-after--p">write inside <code class="markup--code markup--p-code">use-wallet</code> the following:</p><figure name="3665" id="3665" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/chiptus/6433fcb4dc8e1cff7801e7db7b36e334.js"></script></figure><p name="b0f1" id="b0f1" class="graf graf--p graf-after--figure">For now, it doesn’t do anything, except for provide us with the API we want. This hook will tell us when the wallet is initialized, provide the address of the account, show an error is something is wrong, and a connect function.</p><p name="9f15" id="9f15" class="graf graf--p graf-after--p">We’ve also imported <a href="https://medium.com/u/948dd45fd3d0" data-href="https://medium.com/u/948dd45fd3d0" data-anchor-type="2" data-user-id="948dd45fd3d0" data-action-value="948dd45fd3d0" data-action="show-user-card" data-action-type="hover" class="markup--user markup--p-user" target="_blank">Tezos</a> and Beacon Wallet to connect and ask for permission to use a wallet. For more info about hooks read <a href="https://reactjs.org/docs/hooks-intro.html" data-href="https://reactjs.org/docs/hooks-intro.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">react’s docs</em></strong></a></p><p name="efe1" id="efe1" class="graf graf--p graf-after--p">Connect will call taquito to configure the account and network we want to use, and then ask beacon to get permissions from the user to connect.</p><p name="962f" id="962f" class="graf graf--p graf-after--p">Finally, it will return the address.</p><p name="b50b" id="b50b" class="graf graf--p graf-after--p">replace <code class="markup--code markup--p-code">connect</code> with the following</p><figure name="e948" id="e948" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/3f624ef80c8423dd670b34b85b0fb9c4.js"></script></figure><p name="cd15" id="cd15" class="graf graf--p graf-after--figure">Actually, there’s no need to separate connect to two functions, but I prefer it like that, so we can see what happens in the react side ( <code class="markup--code markup--p-code">connect</code>) and taquito side <code class="markup--code markup--p-code">initWallet</code>. As this is more an overview for how to connect @claudebarde with react, let&#39;s go to his post for an explanation about <a href="https://medium.com/coinmonks/build-a-tezos-dapp-using-taquito-and-the-beacon-sdk-692d7dc822aa#ecb3" data-href="https://medium.com/coinmonks/build-a-tezos-dapp-using-taquito-and-the-beacon-sdk-692d7dc822aa#ecb3" class="markup--anchor markup--p-anchor" target="_blank"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">initWallet</em></strong></a></p><p name="71cc" id="71cc" class="graf graf--p graf-after--p">To use it, let’s import it to <code class="markup--code markup--p-code">App.js</code>:</p><figure name="6d0c" id="6d0c" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/debaa487458d730434f751225f2632d0.js"></script></figure><p name="61de" id="61de" class="graf graf--p graf-after--figure">You can see I added an import of the useWallet function from <code class="markup--code markup--p-code">use-wallet</code> and called it on the first line of our component. These values will change when we try to connect. <code class="markup--code markup--p-code">initialized</code> will be true and <code class="markup--code markup--p-code">address</code> will be assigned with the wallet address if we succeed to connect, and <code class="markup--code markup--p-code">error</code> will have a value if we failed to connect. I renamed <code class="markup--code markup--p-code">connect</code> to <code class="markup--code markup--p-code">connectToWallet</code> and <code class="markup--code markup--p-code">error</code> to <code class="markup--code markup--p-code">walletError</code> because we will have more of these soon.</p><p name="8c2b" id="8c2b" class="graf graf--p graf-after--p">So I can hide and show different parts of the app based on if the wallet is initialized or not. For example, I’ll show the connect button if it’s not, and the increase/decrease buttons if it is connected.</p><h3 name="37fd" id="37fd" class="graf graf--h3 graf-after--p">Let’s play</h3><p name="b3fa" id="b3fa" class="graf graf--p graf-after--h3">Open your app and press connect. You’ll should see the following screen:</p><figure name="7372" id="7372" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*6RCpes9_sPeWc3cJKw_8lg.png" data-width="420" data-height="710" src="https://cdn-images-1.medium.com/max/800/1*6RCpes9_sPeWc3cJKw_8lg.png"></figure><p name="3e6b" id="3e6b" class="graf graf--p graf-after--figure">Press confirm, and you’ll be asked to pair your account (if you haven’t before — if you did, make sure this account is a Carthagenet account). Let’s create a local account by enabling Developer mode and choosing “Setup local secret” (You might need to scroll down a bit). You’ll see the account details:</p><figure name="07f4" id="07f4" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*6RCpes9_sPeWc3cJKw_8lg.png" data-width="420" data-height="710" src="https://cdn-images-1.medium.com/max/800/1*6RCpes9_sPeWc3cJKw_8lg.png"></figure><p name="b7a9" id="b7a9" class="graf graf--p graf-after--figure">Close the window and press connect again, this time you’ll see the option to grant permissions, press confirm, the window will close and a popup (inside the app) will appear with the text “Permission Granted”.</p><p name="e6f8" id="e6f8" class="graf graf--p graf-after--p">Going to the explorer won’t give us any info because our account isn’t revealed yet (meaning, the blockchain doesn’t know about it yet). But when we will close the popup we will see the account address, and the buttons are replaced with “Increase”/”Decrease”.</p><h3 name="2734" id="2734" class="graf graf--h3 graf-after--p">Let’s activate the account</h3><p name="9239" id="9239" class="graf graf--p graf-after--h3">When we first create the account, it’s not online yet, thus we need to do an operation on-chain to activate it and reveal it, the easiest would be to send it some Tez. You can do that if you have another Carthagenet account, or otherwise you can use <a href="https://web.telegram.org/#/im?p=@tezos_faucet_bot" data-href="https://web.telegram.org/#/im?p=@tezos_faucet_bot" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">@tezos_faucet_bot</em></strong></a> on telegram. In the bot’s options choose “Get Coins” and send it to your newly created address.</p><p name="f888" id="f888" class="graf graf--p graf-after--p">Now your account should be activated.</p><h3 name="5fe8" id="5fe8" class="graf graf--h3 graf-after--p">Checking the Balance</h3><p name="8d88" id="8d88" class="graf graf--p graf-after--h3">To check the balance we can do two things: Either use the wallet hook or create a new hook. I personally like the second option because then we can use this hook to get balances for other addresses.</p><p name="dd69" id="dd69" class="graf graf--p graf-after--p">Create a new file <code class="markup--code markup--p-code">hooks/use-balance-state.js</code></p><figure name="9d9b" id="9d9b" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/chiptus/320a8fa0f1036381301cbf90221bfd47.js"></script></figure><p name="4d1e" id="4d1e" class="graf graf--p graf-after--figure">As before I first show the hook API, we only need the balance, error, and a loading flag, no functions. This hook will update automatically when the address is changed.</p><p name="ff66" id="ff66" class="graf graf--p graf-after--p">Let’s first connect it to the app so we can see it update automatically.</p><p name="ef63" id="ef63" class="graf graf--p graf-after--p">Import useBalanceState into App.js and show the balance and error when available:</p><figure name="c72b" id="c72b" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/fbb3f3a7814c5bb2fb9b32953c14a052.js"></script></figure><p name="5a6e" id="5a6e" class="graf graf--p graf-after--figure">Nothing will change in the app except that the balance is 0 and “Balance Error” disappeared.</p><p name="8a00" id="8a00" class="graf graf--p graf-after--p">Let’s add loading of the balance inside <code class="markup--code markup--p-code">use-balance-state.js</code>:</p><figure name="105e" id="105e" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/1942f70084d2e2b724e01e9427a31984.js"></script></figure><p name="76c4" id="76c4" class="graf graf--p graf-after--figure">React doesn’t like using of async functions as an effect so we create a loadBalance function that manages the loading of the balance. <code class="markup--code markup--p-code">useEffect</code> basically calls the provided function any time one of the values in the second array parameter changes, in our case, every time the address is changing.</p><p name="9a38" id="9a38" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">loadBalance</code> will use taquito to load the balance of the provided address. taquito returns a value in mutez, so we divide it by 1000000 to get the amount in tez.</p><p name="4d10" id="4d10" class="graf graf--p graf-after--p">Check your app, press connect (this time no confirmation is needed), and see how we first see the address and balance is loading, then we see the amount @tezos_faucet_bot sent us.</p><p name="a287" id="a287" class="graf graf--p graf-after--p">In the next post, we will connect to the contract and make some interactions.</p><p name="1c5c" id="1c5c" class="graf graf--p graf-after--p graf--trailing"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">For more stuff about Tezos, go to our </em></strong><a href="https://gist.github.com/chiptus/tezos.co.il" data-href="https://gist.github.com/chiptus/tezos.co.il" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">blog</em></strong></a></p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@chiptus" class="p-author h-card">Chaim Lev-Ari</a> on <a href="https://medium.com/p/82ffb3114d5e"><time class="dt-published" datetime="2020-07-14T21:32:18.831Z">July 14, 2020</time></a>.</p><p><a href="https://medium.com/@chiptus/building-a-simple-react-dapp-on-the-tezos-blockchain-part-2-82ffb3114d5e" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 13, 2025.</p></footer></article></body></html>